"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1188],{9732:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>_,frontMatter:()=>r,metadata:()=>t,toc:()=>i});var l=s(4848),o=s(8453);const r={},a="alloydb.py",t={id:"sunholo/database/alloydb",title:"alloydb.py",description:"Source: sunholo/database/alloydb.py",source:"@site/docs/sunholo/database/alloydb.md",sourceDirName:"sunholo/database",slug:"/sunholo/database/alloydb",permalink:"/docs/sunholo/database/alloydb",draft:!1,unlisted:!1,editUrl:"https://github.com/sunholo-data/sunholo-py/tree/main/docs/docs/sunholo/database/alloydb.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"database.py",permalink:"/docs/sunholo/database/"},next:{title:"static_dbs.py",permalink:"/docs/sunholo/database/static_dbs"}},c={},i=[{value:"Functions",id:"functions",level:2},{value:"add_document_if_not_exists(doc, vector_name)",id:"add_document_if_not_existsdoc-vector_name",level:3},{value:"_get_sources_from_docstore(sources, vector_name, search_type=&#39;OR&#39;)",id:"_get_sources_from_docstoresources-vector_name-search_typeor",level:3},{value:"and_or_ilike(sources, search_type=&#39;OR&#39;, operator=&#39;ILIKE&#39;)",id:"and_or_ilikesources-search_typeor-operatorilike",level:3},{value:"create_alloydb_engine(vector_name)",id:"create_alloydb_enginevector_name",level:3},{value:"create_alloydb_table(vector_name, engine, type=&#39;vectorstore&#39;, alloydb_config=None, username=None)",id:"create_alloydb_tablevector_name-engine-typevectorstore-alloydb_confignone-usernamenone",level:3},{value:"create_docstore_table(table_name, alloydb_config, username)",id:"create_docstore_tabletable_name-alloydb_config-username",level:3},{value:"create_vectorstore_table(table_name, alloydb_config, username)",id:"create_vectorstore_tabletable_name-alloydb_config-username",level:3},{value:"delete_sources_from_alloydb(sources, vector_name)",id:"delete_sources_from_alloydbsources-vector_name",level:3},{value:"get_sources_from_docstore(sources, vector_name, search_type=&#39;OR&#39;)",id:"get_sources_from_docstoresources-vector_name-search_typeor",level:3},{value:"get_sources_from_docstore_async(sources, vector_name, search_type=&#39;OR&#39;)",id:"get_sources_from_docstore_asyncsources-vector_name-search_typeor",level:3},{value:"load_alloydb_sql(sql, vector_name)",id:"load_alloydb_sqlsql-vector_name",level:3},{value:"load_alloydb_sql_async(sql, vector_name)",id:"load_alloydb_sql_asyncsql-vector_name",level:3},{value:"Classes",id:"classes",level:2},{value:"AlloyDBClient",id:"alloydbclient",level:3}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"alloydbpy",children:"alloydb.py"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.em,{children:"Source"}),": ",(0,l.jsx)(n.a,{href:"https://github.com/sunholo-data/sunholo-py/blob/main/sunholo/database/alloydb.py",children:"sunholo/database/alloydb.py"})]}),"\n",(0,l.jsx)(n.h2,{id:"functions",children:"Functions"}),"\n",(0,l.jsx)(n.h3,{id:"add_document_if_not_existsdoc-vector_name",children:"add_document_if_not_exists(doc, vector_name)"}),"\n",(0,l.jsx)(n.p,{children:"No docstring available."}),"\n",(0,l.jsx)(n.h3,{id:"_get_sources_from_docstoresources-vector_name-search_typeor",children:"_get_sources_from_docstore(sources, vector_name, search_type='OR')"}),"\n",(0,l.jsx)(n.p,{children:"No docstring available."}),"\n",(0,l.jsx)(n.h3,{id:"and_or_ilikesources-search_typeor-operatorilike",children:"and_or_ilike(sources, search_type='OR', operator='ILIKE')"}),"\n",(0,l.jsx)(n.p,{children:"No docstring available."}),"\n",(0,l.jsx)(n.h3,{id:"create_alloydb_enginevector_name",children:"create_alloydb_engine(vector_name)"}),"\n",(0,l.jsx)(n.p,{children:"No docstring available."}),"\n",(0,l.jsx)(n.h3,{id:"create_alloydb_tablevector_name-engine-typevectorstore-alloydb_confignone-usernamenone",children:"create_alloydb_table(vector_name, engine, type='vectorstore', alloydb_config=None, username=None)"}),"\n",(0,l.jsx)(n.p,{children:"No docstring available."}),"\n",(0,l.jsx)(n.h3,{id:"create_docstore_tabletable_name-alloydb_config-username",children:"create_docstore_table(table_name, alloydb_config, username)"}),"\n",(0,l.jsx)(n.p,{children:"No docstring available."}),"\n",(0,l.jsx)(n.h3,{id:"create_vectorstore_tabletable_name-alloydb_config-username",children:"create_vectorstore_table(table_name, alloydb_config, username)"}),"\n",(0,l.jsx)(n.p,{children:"No docstring available."}),"\n",(0,l.jsx)(n.h3,{id:"delete_sources_from_alloydbsources-vector_name",children:"delete_sources_from_alloydb(sources, vector_name)"}),"\n",(0,l.jsx)(n.p,{children:"Deletes from both vectorstore and docstore"}),"\n",(0,l.jsx)(n.h3,{id:"get_sources_from_docstoresources-vector_name-search_typeor",children:"get_sources_from_docstore(sources, vector_name, search_type='OR')"}),"\n",(0,l.jsx)(n.p,{children:"No docstring available."}),"\n",(0,l.jsx)(n.h3,{id:"get_sources_from_docstore_asyncsources-vector_name-search_typeor",children:"get_sources_from_docstore_async(sources, vector_name, search_type='OR')"}),"\n",(0,l.jsx)(n.p,{children:"No docstring available."}),"\n",(0,l.jsx)(n.h3,{id:"load_alloydb_sqlsql-vector_name",children:"load_alloydb_sql(sql, vector_name)"}),"\n",(0,l.jsx)(n.p,{children:"No docstring available."}),"\n",(0,l.jsx)(n.h3,{id:"load_alloydb_sql_asyncsql-vector_name",children:"load_alloydb_sql_async(sql, vector_name)"}),"\n",(0,l.jsx)(n.p,{children:"No docstring available."}),"\n",(0,l.jsx)(n.h2,{id:"classes",children:"Classes"}),"\n",(0,l.jsx)(n.h3,{id:"alloydbclient",children:"AlloyDBClient"}),"\n",(0,l.jsx)(n.p,{children:"A class to manage interactions with an AlloyDB instance."}),"\n",(0,l.jsx)(n.p,{children:"Example Usage:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'client = AlloyDBClient(\n    project_id="your-project-id",\n    region="your-region",\n    cluster_name="your-cluster-name",\n    instance_name="your-instance-name",\n    user="your-db-user",\n    password="your-db-password"\n)\n\n# Create a database\nclient.execute_sql("CREATE DATABASE my_database")\n\n# Execute other SQL statements\nclient.execute_sql("CREATE TABLE my_table (id INT, name VARCHAR(50))")\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"init"}),"(self, project_id: str, region: str, cluster_name: str, instance_name: str, user: str, password=None, db='postgres')","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Initializes the AlloyDB client."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"project_id (str): GCP project ID where the AlloyDB instance resides."}),"\n",(0,l.jsx)(n.li,{children:"region (str): The region where the AlloyDB instance is located."}),"\n",(0,l.jsx)(n.li,{children:"cluster_name (str): The name of the AlloyDB cluster."}),"\n",(0,l.jsx)(n.li,{children:"instance_name (str): The name of the AlloyDB instance."}),"\n",(0,l.jsx)(n.li,{children:"user (str): The database user name."}),"\n",(0,l.jsx)(n.li,{children:"password (str): The database user's password."}),"\n",(0,l.jsx)(n.li,{children:"db_name (str): The name of the database."}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"_and_or_ilike(sources, search_type='OR', operator='ILIKE')"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No docstring available."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"_build_instance_uri(self, project_id, region, cluster_name, instance_name)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No docstring available."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"_create_engine(self, inst_uri, user, password, db)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No docstring available."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"create_database(self, database_name)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No docstring available."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"create_docstore_tables(self, vector_names, users)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No docstring available."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"create_schema(self, schema_name='public')"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No docstring available."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"delete_sources_from_alloydb(self, sources, vector_name)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Deletes from both vectorstore and docstore"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"execute_sql(self, sql_statement)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Executes a given SQL statement with error handling."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"sql_statement (str): The SQL statement to execute."}),"\n",(0,l.jsx)(n.li,{children:"Returns: The result of the execution, if any."}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"fetch_owners(self)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No docstring available."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"grant_permissions(self, schema_name, users)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No docstring available."}),"\n"]}),"\n"]}),"\n"]})]})}function _(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>t});var l=s(6540);const o={},r=l.createContext(o);function a(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);